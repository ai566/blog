import{_ as s,o as a,c as p,Q as l}from"./chunks/framework.3afb20c3.js";const C=JSON.parse('{"title":"视频编辑神器——FFmpeg","description":"","frontmatter":{},"headers":[],"relativePath":"Linux/视频编辑神器——FFmpeg.md","filePath":"Linux/视频编辑神器——FFmpeg.md"}'),o={name:"Linux/视频编辑神器——FFmpeg.md"},n=l(`<h1 id="视频编辑神器——ffmpeg" tabindex="-1">视频编辑神器——FFmpeg <a class="header-anchor" href="#视频编辑神器——ffmpeg" aria-label="Permalink to &quot;视频编辑神器——FFmpeg&quot;">​</a></h1><p>ffmpeg是一个免费轻巧的视频编辑命令行神器，可以使用一条命令转换格式、合并视频、剪辑片段、裁切画面、提取音频、添加字幕等。我自己就经常使用ffmpeg进行一些简单的格式转换、片段合并等操作。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p>去官网下载ffmpeg Windows程序，会在安装目录的bin下看到三个可执行文件：ffmpeg.exe、ffplay.exe、ffprobe.exe，将该目录添加到Path环境变量，就可以在命令行中使用命令了。使用<code>ffmpeg -version</code>检查是否安装设置成功。使用<code>ffmpeg -h</code>查看帮助。</p><h2 id="ffmpeg、ffplay命令说明" tabindex="-1">ffmpeg、ffplay命令说明 <a class="header-anchor" href="#ffmpeg、ffplay命令说明" aria-label="Permalink to &quot;ffmpeg、ffplay命令说明&quot;">​</a></h2><p>ffplay用于预览视频，ffmpeg用于输出视频。</p><p>（1）通用参数</p><ul><li><p>-f：指定格式（音频或视频格式）</p></li><li><p>-i filename：输入文件名</p></li><li><p>-y：覆盖已有文件</p></li><li><p>-t：指定时长，以秒为单位，精确到毫秒</p></li><li><p>-map：指定映射关系。例如 <code>-map 1:0 -map 1:1</code> 表示将input1的第一个流和input2的第2个流输出。</p></li></ul><p>（2）视频参数</p><ul><li><p>-r ： 指定帧速率</p></li><li><p>-s size ：指定分辨率</p></li><li><p>-aspect aspect：指定长宽比。例如 4:3、16:9。</p></li><li><p>-croptop/cropbottom/cropleft/cropright size：设置顶部/底部/左边/右边切除尺寸，例如<code>-croptop 20px</code>。</p></li><li><p>-padtop/padbottom/padleft/padright size ： 设置顶部/底部/左边/右边补齐尺寸，例如<code>-padtop 20px</code>。</p></li><li><p>-padcolor color：补齐带颜色，范围000000-FFFFFF。例如<code>-pad #ff0000</code></p></li><li><p>-vn：取消视频输出</p></li><li><p>-an：取消音频输出</p></li><li><p>-vcodec <code>&lt;codec&gt;</code>：使用<code>&lt;codec&gt;</code>视频编码方式，一般为copy表示不重新编码，直接复制。</p></li><li><p>-acodec <code>&lt;codec&gt;</code>：使用<code>&lt;codec&gt;</code>音频编码方式，一般为copy表示不重新编码，直接复制。</p></li></ul><h2 id="格式转换" tabindex="-1">格式转换 <a class="header-anchor" href="#格式转换" aria-label="Permalink to &quot;格式转换&quot;">​</a></h2><p>格式转换是最常使用的需求，如下示例将1.mp4转换成2.avi ：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.avi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.avi</span></span></code></pre></div><p>如果指定编码可以更快的完成格式转换：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-codec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.avi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-codec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.avi</span></span></code></pre></div><p>说明，所有相关的操作中，加上 <code>-codec copy</code> 不会重新编解码所以会加快执行速度。</p><h2 id="截取视频片段" tabindex="-1">截取视频片段 <a class="header-anchor" href="#截取视频片段" aria-label="Permalink to &quot;截取视频片段&quot;">​</a></h2><p>截取视频片段主要涉及三个选项：</p><ul><li><p>-ss ：设置起始时间，格式为 <code>时:分:秒.毫秒 或秒数</code>，默认为开始00:00:00.000</p></li><li><p>-to ：设置结束时间，格式为<code>时:分:秒.毫秒 或秒数</code>，默认为视频结束。</p></li><li><p>-t ： 设置持续时间，单位为秒，精确到毫秒。</p></li></ul><p>例如下面的命令指定起始和终止时间：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpege</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">00</span><span style="color:#9ECBFF;">:01:02.056</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-to</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">00</span><span style="color:#9ECBFF;">:02:02.056</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-codec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpege</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-ss</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">00</span><span style="color:#032F62;">:01:02.056</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-to</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">00</span><span style="color:#032F62;">:02:02.056</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-codec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><p>下面的命令指定起始时间和持续时间：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpege</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">-ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">01</span><span style="color:#9ECBFF;">:02:03.568</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">80.098</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">-codec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpege</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">-ss</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">01</span><span style="color:#032F62;">:02:03.568</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">80.098</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">-codec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><h2 id="去掉音频-提取视频" tabindex="-1">去掉音频，提取视频 <a class="header-anchor" href="#去掉音频-提取视频" aria-label="Permalink to &quot;去掉音频，提取视频&quot;">​</a></h2><p><code>-an</code>选项表示取消音频输出：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">input.mp4</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-an</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-vcodec</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">output.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#032F62;">input.mp4</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-an</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-vcodec</span><span style="color:#24292E;">  </span><span style="color:#032F62;">copy</span><span style="color:#24292E;">  </span><span style="color:#032F62;">output.mp4</span></span></code></pre></div><h2 id="合并视频" tabindex="-1">合并视频 <a class="header-anchor" href="#合并视频" aria-label="Permalink to &quot;合并视频&quot;">​</a></h2><p>合并视频分两步。首先准备1个文本文件如1.txt存放要合并的文件名，内容示例如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">file &#39;1.mp4&#39;</span></span>
<span class="line"><span style="color:#e1e4e8;">file &#39;2.mp4&#39;</span></span>
<span class="line"><span style="color:#e1e4e8;">file &#39;3.mp4&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">file &#39;1.mp4&#39;</span></span>
<span class="line"><span style="color:#24292e;">file &#39;2.mp4&#39;</span></span>
<span class="line"><span style="color:#24292e;">file &#39;3.mp4&#39;</span></span></code></pre></div><p>然后执行如下命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">concat</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.txt</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;">  </span><span style="color:#032F62;">concat</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.txt</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output.mp4</span></span></code></pre></div><p>output.mp4就是合并后的文件。</p><h2 id="裁剪画面尺寸" tabindex="-1">裁剪画面尺寸 <a class="header-anchor" href="#裁剪画面尺寸" aria-label="Permalink to &quot;裁剪画面尺寸&quot;">​</a></h2><p>裁剪视频画面的语法如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">t.mp4</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">-vf</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">crop=w:h:x:y</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">t.mp4</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">-vf</span><span style="color:#24292E;">  </span><span style="color:#032F62;">crop=w:h:x:y</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><p>crop的参数，分表代表宽，高，起始x，起始y。 起点是视频的左上角。</p><p>示例如下；</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-vf</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">crop=</span><span style="color:#79B8FF;">2560</span><span style="color:#9ECBFF;">:1440:0:0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-vf</span><span style="color:#24292E;">   </span><span style="color:#032F62;">crop=</span><span style="color:#005CC5;">2560</span><span style="color:#032F62;">:1440:0:0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><h2 id="提取音频" tabindex="-1">提取音频 <a class="header-anchor" href="#提取音频" aria-label="Permalink to &quot;提取音频&quot;">​</a></h2><p>使用-vn选项取消视频输出，就可以提取音频了：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-vn</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-acodec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.mp3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-vn</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-acodec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.mp3</span></span></code></pre></div><h2 id="合并多个音频" tabindex="-1">合并多个音频 <a class="header-anchor" href="#合并多个音频" aria-label="Permalink to &quot;合并多个音频&quot;">​</a></h2><p>合并音频示例如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input1.mp3</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input2.mp3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-filter_complex</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">amix=inputs=</span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">:duration=shortest</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">output.wav</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input1.mp3</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input2.mp3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-filter_complex</span><span style="color:#24292E;">  </span><span style="color:#032F62;">amix=inputs=</span><span style="color:#005CC5;">2</span><span style="color:#032F62;">:duration=shortest</span><span style="color:#24292E;">  </span><span style="color:#032F62;">output.wav</span></span></code></pre></div><p>duration=shortest表示按照长度较短的音频文件的长度作为输出的长度。</p><h2 id="调整音量" tabindex="-1">调整音量 <a class="header-anchor" href="#调整音量" aria-label="Permalink to &quot;调整音量&quot;">​</a></h2><p>将音量减半然后输出：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.wav</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-af</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;volume=0.5&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.wav</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.wav</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-af</span><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;volume=0.5&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.wav</span></span></code></pre></div><h2 id="音频淡入淡出" tabindex="-1">音频淡入淡出 <a class="header-anchor" href="#音频淡入淡出" aria-label="Permalink to &quot;音频淡入淡出&quot;">​</a></h2><p>音频淡入示例如下，<code>afade=t=in:ss:0:d=5</code>表示前5秒淡入音频：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.wav</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-filter_complex</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">afade=t=in:ss:0:d=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.wav</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.wav</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-filter_complex</span><span style="color:#24292E;">  </span><span style="color:#032F62;">afade=t=in:ss:0:d=</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.wav</span></span></code></pre></div><p>音频淡出示例如下，<code>afade=t:out:st=200:d=5</code>表示从200秒开始，做5秒的淡出效果：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">input.wav</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-filter_complex</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">afade=t=out:st=</span><span style="color:#79B8FF;">200</span><span style="color:#9ECBFF;">:d=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">output.wav</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#032F62;">input.wav</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-filter_complex</span><span style="color:#24292E;">  </span><span style="color:#032F62;">afade=t=out:st=</span><span style="color:#005CC5;">200</span><span style="color:#032F62;">:d=</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">  </span><span style="color:#032F62;">output.wav</span></span></code></pre></div><h2 id="声音变速不变调" tabindex="-1">声音变速不变调 <a class="header-anchor" href="#声音变速不变调" aria-label="Permalink to &quot;声音变速不变调&quot;">​</a></h2><p>如下示例中，atempo=0.5表示按照0.5的速度输出，结果是长度将变为2倍。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp3</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-filter_complex</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">atempo=</span><span style="color:#79B8FF;">0.5</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">.wav</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp3</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-filter_complex</span><span style="color:#24292E;">   </span><span style="color:#032F62;">atempo=</span><span style="color:#005CC5;">0.5</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">.wav</span></span></code></pre></div><h2 id="ffplay的用法" tabindex="-1">ffplay的用法 <a class="header-anchor" href="#ffplay的用法" aria-label="Permalink to &quot;ffplay的用法&quot;">​</a></h2><p>（1）播放</p><ul><li><p>播放视频：ffplay input.mp4。 按下s进入帧模式，按一次s就往前播放一帧。</p></li><li><p>播放音频：ffplay input.mp3 。</p></li><li><p>指定播放音量: ffplay -volumn 60 -i input.mp4</p></li><li><p>全屏播放：ffplay -i input.mp4 -fs</p></li></ul><p>（2）设置播放窗口</p><ul><li><p>-window_title ：指定标题</p></li><li><p>-noborder：窗口无边框</p></li><li><p>-alwaysontop：窗口置顶</p></li><li><p>-left/top <code>&lt;size&gt;</code>：播放窗口的位置</p></li><li><p>-x/y <code>&lt;size&gt;</code>：设置播放窗口的宽度/高度</p></li></ul><h2 id="字幕相关" tabindex="-1">字幕相关 <a class="header-anchor" href="#字幕相关" aria-label="Permalink to &quot;字幕相关&quot;">​</a></h2><p>载入ass字幕播放：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffplay</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-vf</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">subtitles=</span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.ass</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffplay</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-vf</span><span style="color:#24292E;">  </span><span style="color:#032F62;">subtitles=</span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.ass</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><p>载入srt字幕播放：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffplay</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-vf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;subtitles=1.srt:force_style=&#39;Fontsize=20,PrimaryColour=&amp;HFFFFFF&amp;&#39;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffplay</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-vf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;subtitles=1.srt:force_style=&#39;Fontsize=20,PrimaryColour=&amp;HFFFFFF&amp;&#39;&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span></span></code></pre></div><p>输出字幕文件（视频有字幕的前提下）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.mp4</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">-vf</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">subtitles=</span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">.srt或1.ass</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.mp4</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">-vf</span><span style="color:#24292E;">  </span><span style="color:#032F62;">subtitles=</span><span style="color:#005CC5;">1</span><span style="color:#032F62;">.srt或1.ass</span></span></code></pre></div><p>force_style常用参数如下：</p><ul><li><p>FontName：字体名称</p></li><li><p>FontSize：字体大小</p></li><li><p>Alignment：以数值表示的对齐方式。常见的中下为2、正中为10。</p></li><li><p>PrimaryColour：颜色</p></li><li><p>OutlineColor：边框颜色，&amp;后面的两位为透明度。</p></li><li><p>MarginV：字幕距离底部或顶部的距离</p></li></ul>`,70),e=[n];function t(c,r,y,i,E,F){return a(),p("div",null,e)}const h=s(o,[["render",t]]);export{C as __pageData,h as default};
